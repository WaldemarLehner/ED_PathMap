(self.webpackJsonp=self.webpackJsonp||[]).push([[4],{129:function(s,e,n){n(130),s.exports=n(148)},130:function(s,e,n){function r(s){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(s){return typeof s}:function(s){return s&&"function"==typeof Symbol&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(s)}var t=n(131);function o(s){if(void 0===s)throw new TypeError("No argument has been passed. This method needs the logs as object to be passed.");if("object"!==r(s))throw new TypeError("Passed argument needs to be typeof object. An object that represents an entry from the logs.")}self.addEventListener("message",function(s){var e={cmd:"setPreparedData",params:function(s,e){var r=n(134);if(!function(s){if(o(s),function(s){for(var e in s)if(s.hasOwnProperty(e))return!1;return!0}(s))throw new TypeError("An empty object has been passed");var e=!0;return s.forEach(function(s){(function(s){o(s);var e,n=!0;return function(s){if(Array.isArray(s)){var e=!0;return s.forEach(function(s){("number"!=typeof s||isNaN(s))&&(e=!1)}),e}return"number"==typeof s&&!isNaN(s)}([s.x,s.y,s.z])&&"string"==typeof s.name||(n=!1),"string"!=typeof s.dateVisited?n=!1:"string"==typeof(e=s.dateVisited)&&/^(?:(?!0000)[0-9]{4}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)-02-29)\s([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]$/.test(e)||(n=!1),n})(s)||(e=!1)}),e}(s))throw new Error("Passed Logs have an unexpected structure.");var a=t.getIndexDateBounds(s,t.getDateLimits(e));s=function(s,e){return s.slice(e[0],e[1])}(s,a);var i=r.systemMap(s),u=r.connectionMap(s),c={systems:i.max,connections:u.max};i=i.map,u=u.map;var j=r.drawInstructions(s,i,u,c);return{logs:s,maps:{systems:i,connections:u},drawInstructions:j}}(s.data.json,s.data.url)};self.postMessage([e]),close()})},131:function(s,e,n){var r=n(0);n(128);function t(s,e,n,r){return n>=r[0]&&e.push(s),n>=r[1]&&e.push(0===s?0:s-1),e}s.exports={getDateLimits:function(s){if(function(s){if("string"!=typeof s)throw new TypeError("Given URL is not typeof string");if(0===s.length)throw new Error("Given URL string is 0 long.")}(s),1===(s=s.split("?",2)).length)return!1;var e=s[1].substring(s[1].lastIndexOf("[DATE]")+6,s[1].lastIndexOf("[/DATE]")).split(";",2);if(2!==e.length)return console.error("URL is set up incorrect. Ignoring filtering by date."),!1;n=e[0],t=e[1],n.valueOf()>t.valueOf()&&(e=e.reverse(),console.warn("First date was greater than last date. Reversing order."));var n,t;!function(s){self.postMessage([{cmd:"UI",params:s}])}(e);var o=[r.unix(e[0]).unix(),r.unix(e[1]).unix()];return console.log(o),o},getIndexDateBounds:function(s,e){return function(s,e){for(var n=[],o=0;o<s.length-1;o++){var a=r(s[o].dateVisited).unix();n=t(o,n,a,e)}return n}(s,e)}}},133:function(s,e,n){var r={"./af":1,"./af.js":1,"./ar":2,"./ar-dz":3,"./ar-dz.js":3,"./ar-kw":4,"./ar-kw.js":4,"./ar-ly":5,"./ar-ly.js":5,"./ar-ma":6,"./ar-ma.js":6,"./ar-sa":7,"./ar-sa.js":7,"./ar-tn":8,"./ar-tn.js":8,"./ar.js":2,"./az":9,"./az.js":9,"./be":10,"./be.js":10,"./bg":11,"./bg.js":11,"./bm":12,"./bm.js":12,"./bn":13,"./bn.js":13,"./bo":14,"./bo.js":14,"./br":15,"./br.js":15,"./bs":16,"./bs.js":16,"./ca":17,"./ca.js":17,"./cs":18,"./cs.js":18,"./cv":19,"./cv.js":19,"./cy":20,"./cy.js":20,"./da":21,"./da.js":21,"./de":22,"./de-at":23,"./de-at.js":23,"./de-ch":24,"./de-ch.js":24,"./de.js":22,"./dv":25,"./dv.js":25,"./el":26,"./el.js":26,"./en-SG":27,"./en-SG.js":27,"./en-au":28,"./en-au.js":28,"./en-ca":29,"./en-ca.js":29,"./en-gb":30,"./en-gb.js":30,"./en-ie":31,"./en-ie.js":31,"./en-il":32,"./en-il.js":32,"./en-nz":33,"./en-nz.js":33,"./eo":34,"./eo.js":34,"./es":35,"./es-do":36,"./es-do.js":36,"./es-us":37,"./es-us.js":37,"./es.js":35,"./et":38,"./et.js":38,"./eu":39,"./eu.js":39,"./fa":40,"./fa.js":40,"./fi":41,"./fi.js":41,"./fo":42,"./fo.js":42,"./fr":43,"./fr-ca":44,"./fr-ca.js":44,"./fr-ch":45,"./fr-ch.js":45,"./fr.js":43,"./fy":46,"./fy.js":46,"./ga":47,"./ga.js":47,"./gd":48,"./gd.js":48,"./gl":49,"./gl.js":49,"./gom-latn":50,"./gom-latn.js":50,"./gu":51,"./gu.js":51,"./he":52,"./he.js":52,"./hi":53,"./hi.js":53,"./hr":54,"./hr.js":54,"./hu":55,"./hu.js":55,"./hy-am":56,"./hy-am.js":56,"./id":57,"./id.js":57,"./is":58,"./is.js":58,"./it":59,"./it-ch":60,"./it-ch.js":60,"./it.js":59,"./ja":61,"./ja.js":61,"./jv":62,"./jv.js":62,"./ka":63,"./ka.js":63,"./kk":64,"./kk.js":64,"./km":65,"./km.js":65,"./kn":66,"./kn.js":66,"./ko":67,"./ko.js":67,"./ku":68,"./ku.js":68,"./ky":69,"./ky.js":69,"./lb":70,"./lb.js":70,"./lo":71,"./lo.js":71,"./lt":72,"./lt.js":72,"./lv":73,"./lv.js":73,"./me":74,"./me.js":74,"./mi":75,"./mi.js":75,"./mk":76,"./mk.js":76,"./ml":77,"./ml.js":77,"./mn":78,"./mn.js":78,"./mr":79,"./mr.js":79,"./ms":80,"./ms-my":81,"./ms-my.js":81,"./ms.js":80,"./mt":82,"./mt.js":82,"./my":83,"./my.js":83,"./nb":84,"./nb.js":84,"./ne":85,"./ne.js":85,"./nl":86,"./nl-be":87,"./nl-be.js":87,"./nl.js":86,"./nn":88,"./nn.js":88,"./pa-in":89,"./pa-in.js":89,"./pl":90,"./pl.js":90,"./pt":91,"./pt-br":92,"./pt-br.js":92,"./pt.js":91,"./ro":93,"./ro.js":93,"./ru":94,"./ru.js":94,"./sd":95,"./sd.js":95,"./se":96,"./se.js":96,"./si":97,"./si.js":97,"./sk":98,"./sk.js":98,"./sl":99,"./sl.js":99,"./sq":100,"./sq.js":100,"./sr":101,"./sr-cyrl":102,"./sr-cyrl.js":102,"./sr.js":101,"./ss":103,"./ss.js":103,"./sv":104,"./sv.js":104,"./sw":105,"./sw.js":105,"./ta":106,"./ta.js":106,"./te":107,"./te.js":107,"./tet":108,"./tet.js":108,"./tg":109,"./tg.js":109,"./th":110,"./th.js":110,"./tl-ph":111,"./tl-ph.js":111,"./tlh":112,"./tlh.js":112,"./tr":113,"./tr.js":113,"./tzl":114,"./tzl.js":114,"./tzm":115,"./tzm-latn":116,"./tzm-latn.js":116,"./tzm.js":115,"./ug-cn":117,"./ug-cn.js":117,"./uk":118,"./uk.js":118,"./ur":119,"./ur.js":119,"./uz":120,"./uz-latn":121,"./uz-latn.js":121,"./uz.js":120,"./vi":122,"./vi.js":122,"./x-pseudo":123,"./x-pseudo.js":123,"./yo":124,"./yo.js":124,"./zh-cn":125,"./zh-cn.js":125,"./zh-hk":126,"./zh-hk.js":126,"./zh-tw":127,"./zh-tw.js":127};function t(s){var e=o(s);return n(e)}function o(s){if(!n.o(r,s)){var e=new Error("Cannot find module '"+s+"'");throw e.code="MODULE_NOT_FOUND",e}return r[s]}t.keys=function(){return Object.keys(r)},t.resolve=o,s.exports=t,t.id=133},134:function(s,e,n){function r(s,e,n){var r=o(s.name,e.name);n[r]={name:r,count:1}}function t(s,e){return s>e?s:e}function o(s,e){return 1===s.toUpperCase().localeCompare(e.toUpperCase())?s+":"+e:e+":"+s}s.exports={systemMap:function(s){for(var e={},n=1,r=0;r<s.length;r++){var o=s[r],a=e[s[r].name];void 0!==a?(a.count++,n=t(a.count,n)):a={name:(i=o).name,count:1,coords:{x:i.x/32,y:i.y/32,z:i.z/32}},e[a.name]=a}var i;return{map:e,max:n}},connectionMap:function(s){for(var e={},n=1,a=0;a<s.length-2;a++){var i=[s[a],s[a+1]],u=o(i[0].name,i[1].name),c=e[u];void 0===c?r(i[0],i[1],e):(c.count++,n=t(c.count,n))}return{map:e,max:n}},drawInstructions:function(s,e,n,r){var t={};return t.points=function(s,e){var n=[];for(var r in s)if(s.hasOwnProperty(r)){var t=s[r],o=t.coords,i=t.count;n.push({color:a.generateColor(i,!0,e),size:a.generatePointSize(i,e),position:o})}return n}(e,r.systems),t.lines=function(s,e,n,r){for(var t=[],u=0;u<s.length-2;u++){var c=s[u],j=s[u+1],l=s[u+2],f=e[o(c.name,j.name)],m=e[o(j.name,l.name)];if(!i(f)&&!i(m)){var p=a.generateColor(f.count,!1,r),d=n[c.name].coords;if(t.push({color:p,coords:d}),f.count!==m.count){var h=a.generateColor(m.count,!1,r);t.push({color:h,coords:n[j.name].coords})}if(u===s.length-2){var v=a.generateColor(m);t.push({color:v,coords:n[j.name].coords},{color:v,coords:n[l.name].coords})}}}return t}(s,n,e,r.connections),t}};var a=n(135);function i(s){return void 0===s}},135:function(s,e,n){var r=n(136),t=n(137);function o(s,e,n){if(s<=e[0])return n[0];if(s>=e[1])return n[1];var r=(s-e[0])/(e[1]-e[0]);return n[0]+(n[1]-n[0])*r}s.exports={generateColor:function(s,e,n){var o=[],a=e?r.systems.color:r.connections.color;return o[1]=a.useMaxValueFromLogsInstead?n:a.maxVal,o[0]=a.minVal,t.scale(a.colorGradient).mode("lab").domain(o[0],o[1])(s).num()},generatePointSize:function(s,e){var n=r.systems.size;if(n.useSizeMapperInstead)return function(s){var e=r.systems.size.sizeMapper.sizeValues,n=0,t=!1;for(;n<e.length;n++)if(e[n][0]>=s){t=!0;break}if(!t)return e[e.length-1][1];if(0===n)return e[0][1];return o(s,[e[n-1][0],e[n][0]],[e[n-1][1],e[n][1]])}(n.sizeMapper.useAbsoluteValues?s:s/e);var t=n.minSize,a=n.maxSize;return o(s,[0,e],[t,a])}}},136:function(s,e){s.exports={systems:{color:{colorGradient:[6684686,514816],minVal:0,maxVal:100,useMaxValueFromLogsInstead:!0},size:{minSize:1,maxSize:10,useSizeMapperInstead:!0,sizeMapper:{useAbsoluteValues:!0,sizeValues:[[0,1],[10,10],[20,15],[30,20],[50,25],[100,30],[200,35]]}}},connections:{color:{colorGradient:[6684686,514816],minVal:0,maxVal:100,useMaxValueFromLogsInstead:!0}}}},148:function(s,e){}},[[129,0,1]]]);
//# sourceMappingURL=prepareData.worker.js.map